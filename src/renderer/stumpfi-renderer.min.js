/** Copyright 2016 - present, Matthieu Jabbour <matthieu.jabbour@gmail.com>. All rights reserved. */
window.onload=function(){const a=JSON.parse(document.body.childNodes[0].innerHTML),b=g=>g.replace(/([A-Z])/g,'-$1').toLowerCase(),c=g=>{const h=g.attributes,i=Object.keys(h).reduce((j,k)=>'string'==typeof h[k]?`${j} ${b(k)}="${h[k]}"`:`${j} ${b(k)}`,'').trim();switch(g.type){case'style':return`<style ${i}>${g.content||''}</style>`;case'script':return`<script ${i}>${g.content||''}</script>`;default:return`<link ${i} />`;}},d=g=>`<div class="${g.className}" style="${Object.keys(g.style).reduce((h,i)=>`${b(i)}: ${g.style[i]}; ${h}`,'').trim()}">`+`${a.contents[g.content].html}`+`</div>`,e=g=>{const h=[],i=[];i.unshift(c({tagName:'script',content:'function scale() {const fontSize = Math.min(16/9 * window.innerHeight / 100, window.innerWidth / 100);document.body.style.fontSize = `${fontSize}px`;}window.addEventListener(\'resize\', scale); window.onload = scale;',attributes:{type:'text/javascript','data-default':!0}})),i.unshift(c({tagName:'style',content:'div[data-component-id]{overflow: auto; position: absolute;}body{width: calc(16/9 * 100vh); height: calc(9/16 * 100vw); max-width: 100vw;max-height: 100vh; position: relative; margin: 0;}',attributes:{type:'text/css','data-default':!0}}));for(let j=g;null!==j;)j.resources.forEach(l=>{i.unshift(c(l))}),j.components.forEach(l=>{h.unshift(d(a.components[l]))}),j=null===j.master?null:a.pages[j.master];const k=`<!DOCTYPE html>`+`<html>`+`<head>`+`${i.join('')}`+`</head>`+`<body>`+`${h.join('')}`+`</body>`+`</html>`;return`<iframe srcDoc="${k.replace(/\"/g,'&quot;')}" class="stumpfi page" />`};let f='';Object.keys(a.documents).forEach(g=>{a.documents[g].pages.forEach(h=>{f+=e(a.pages[h])}),document.body.innerHTML=f})};