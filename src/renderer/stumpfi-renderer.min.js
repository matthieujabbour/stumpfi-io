/** Copyright 2016 - present, Matthieu Jabbour <matthieu.jabbour@gmail.com>. All rights reserved. */
window.onload=function(){const a=JSON.parse(document.body.childNodes[0].innerHTML);let b=!1;const c=h=>h.replace(/([A-Z])/g,'-$1').toLowerCase(),d=h=>{const i=h.attributes,j=Object.keys(i).reduce((k,l)=>'string'==typeof i[l]?`${k} ${c(l)}="${i[l]}"`:`${k} ${c(l)}`,'').trim();switch(h.type){case'style':return`<style ${j}>${h.content||''}</style>`;case'script':return`<script ${j}>${h.content||''}</script>`;default:return`<link ${j} />`;}},e=h=>{const i=`position: absolute;`+`width: ${h.dimensions.w}%;`+`height: ${h.dimensions.h}%;`+`top: ${h.coordinates.y}%;`+`left: ${h.coordinates.x}%;`,k=a.templates[h.template],l=k.code.replace(/\{\{(RICH_TEXT|SIMPLE_TEXT|MEDIA)\}\}/g,(m,n,o)=>{return n!==a.contents[h.contents[o]].type&&(console.warn(`Content #${h.contents[o]}'s type is not compatible with ${n}.`),b=!0),a.contents[h.contents[o]].markupText});return`<div style="${i}">${l}</div>`},f=h=>{const i=[],j=[];j.unshift(d({tagName:'script',content:'function scale() {const fontSize = Math.min(16/9 * window.innerHeight / 100, window.innerWidth / 100);document.body.style.fontSize = `${fontSize}px`;}window.addEventListener(\'resize\', scale); window.onload = scale;',attributes:{type:'text/javascript','data-default':!0}})),j.unshift(d({tagName:'style',content:'div[data-component-id]{overflow: auto; position: absolute;}body{width: calc(16/9 * 100vh); height: calc(9/16 * 100vw); max-width: 100vw;max-height: 100vh; position: relative; margin: 0;}',attributes:{type:'text/css','data-default':!0}}));for(let k=h;null!==k;)k.resources.forEach(m=>{j.unshift(d(m))}),k.components.forEach(m=>{i.unshift(e(a.components[m]))}),k=null===k.master?null:a.pages[k.master];const l=`<!DOCTYPE html>`+`<html>`+`<head>`+`${j.join('')}`+`</head>`+`<body>`+`${i.join('')}`+`</body>`+`</html>`;return`<iframe srcDoc="${l.replace(/\"/g,'&quot;')}" class="stumpfi page" />`};let g='';Object.keys(a.documents).forEach(h=>{a.documents[h].pages.forEach(i=>{g+=f(a.pages[i])}),document.body.innerHTML=g}),!0==b&&console.error('One or many errors occured during document rendering. This may affect displaying.')};